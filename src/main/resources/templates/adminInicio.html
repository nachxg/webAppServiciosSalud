<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Inicio Administrador</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
<nav class="">
    <a class="logo" href="/">
        <img src="/img/logoColor.png" alt="" class="logo">
    </a>
    <div class="volver">
        <a href="/">Volver a Inicio</a>
    </div>
</nav>
<section class="banner-admin">
    <div>
        <h1>Panel Administrador</h1>
        <p>Home / Admin</p>
    </div>
</section>
<br><br>
<section>
    <div class="desplegable">
        <select id="opcionesDesplegable">
            <option value="" disabled selected hidden>Tablas</option>
            <option value="opcion1">Profesionales Acciones</option>
            <option value="opcion2">Pacientes Acciones</option>
        </select>
    </div>
    <section>
        <div class="container">
            <div class="container-fluid py-4">
                <div class="row">
                    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text-capitalize font-weight-bold">Usuarios
                                                Registrados</p>
                                            <h5 class="font-weight-bolder mb-0">
                                               <span class="text-sm font-weight-bolder"
                                                     th:text="${usuariosRegistradosConAumento}"></span>
                                                <span class="text-success text-sm font-weight-bolder">+10%</span>
                                            </h5>
                                        </div>

                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                            <i class="ni ni-single-02 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text-capitalize font-weight-bold">Pacientes
                                                Registrados</p>
                                            <h5 class="font-weight-bolder mb-0">
                                                20
                                                <span class="text-success text-sm font-weight-bolder">+3%</span>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                            <i class="ni ni-hospital text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text-capitalize font-weight-bold">Profesionales
                                                Registrados</p>
                                            <h5 class="font-weight-bolder mb-0">
                                                9
                                                <span class="text-danger text-sm font-weight-bolder">-10%</span>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                            <i class="ni ni-badge text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-sm-6">
                        <div class="card">
                            <div class="card-body p-3">
                                <div class="row">
                                    <div class="col-8">
                                        <div class="numbers">
                                            <p class="text-sm mb-0 text-capitalize font-weight-bold">Altas Médicas</p>
                                            <h5 class="font-weight-bolder mb-0">
                                               <span class="text-sm font-weight-bolder"
                                                     th:text="${altasProfesionales != null ? #lists.size(altasProfesionales) : 0}"></span>
                                                <span class="text-success text-sm font-weight-bolder"
                                                      th:text="${porcentajeIncremental}"></span>
                                            </h5>
                                        </div>
                                    </div>
                                    <div class="col-4 text-end">
                                        <div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md">
                                            <i class="ni ni-chart-bar-32 text-lg opacity-10" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container mt-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Profesionales en Espera</h5>
                            <p class="card-text">Lista de profesionales que están esperando ser dados de alta en el
                                sistema.</p>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                    <tr>
                                        <th
                                                class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            Nombre
                                        </th>
                                        <th
                                                class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            DNI
                                        </th>
                                        <th
                                                class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                            Acción
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody th:each="profesionalInactivo : ${profesionalesInactivos}">
                                    <tr>
                                        <td th:text="${profesionalInactivo.nombre} + ' ' + ${profesionalInactivo.apellido}">
                                        </td>
                                        <td th:text="${profesionalInactivo.dni}"></td>
                                        <td>
                                            <button id="btnAlta" class="btn btn-primary"
                                                    th:onclick="'darDeAlta(' + ${profesionalInactivo.id} + ')'"></button>
                                            Alta</button>
                                        </td>
                                    </tr>
                                    </tbody>

                                </table>
                                <div class="mt-2" th:if="${not #strings.isEmpty(errorProfesionalInactivo)}">
                                    <p class="text-center"><span th:text="${errorProfesionalInactivo}"></span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Section Profesionales en espera de alta-->
    <section class="pacientes container">
        <div class="row my-4">
            <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
                <div class="card">
                    <div class="card-header pb-0">
                        <div class="row">
                            <div class="col-lg-6 col-7">
                                <h6>Profesionales</h6>
                                <p class="text-sm mb-0">
                                    <i class="fa fa-check text-info" aria-hidden="true"></i>
                                    <span class="font-weight-bold ms-1">Profesionales de alta</span> este mes
                                </p>
                            </div>
                            <div class="col-lg-6 col-5 my-auto text-end">
                                <div class="dropdown float-lg-end pe-4">
                                    <a class="cursor-pointer" id="dropdownTable2" data-bs-toggle="dropdown"
                                       aria-expanded="false">
                                        <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true"></i>
                                    </a>
                                    <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable">
                                        <li><a class="dropdown-item border-radius-md" href="#">Acciones</a></li>
                                        <li><a class="dropdown-item border-radius-md" href="#">Pacientes</a></li>
                                        <li><a class="dropdown-item border-radius-md" href="#">Profesionales</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-3">
                        <div class="table-responsive">
                            <table class="table align-middle mb-0 bg-white">
                                <thead class="bg-light">
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Perfil
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sexo
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Matricula
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Especialidad
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Activo
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Teléfono
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Tipo
                                        de
                                        Usuario
                                    </th>
                                </tr>
                                </thead>
                                <tbody th:each="profesionalActivo : ${profesionalesActivos}">
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="profile-image">
                                                <img class="rounded-3" style="width: 50px;"
                                                     th:if="${profesionalActivo.imagen != null}"
                                                     th:src="@{/imagen/perfil/{id}(id=${profesionalActivo.id})}">
                                                <img class="rounded-3" style="width: 50px;"
                                                     th:unless="${profesionalActivo.imagen != null}"
                                                     th:src="@{/img/usuario.jpg}">
                                            </div>
                                            <div class="ms-3">
                                                <p class="fw-bold mb-1"
                                                   th:text="${profesionalActivo.nombre + ' ' + profesionalActivo.apellido}"></p>
                                                <p class="text-muted mb-0" th:text="${profesionalActivo.email}"></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <p class="fw-normal mb-1" th:text="${profesionalActivo.sexo}"></p>
                                    </td>
                                    <td>
                                        <p class="text-muted mb-0" th:text="${profesionalActivo.matricula}"></p>
                                    </td>
                                    <td>
                                        <p class="text-muted mb-0" th:text="${profesionalActivo.especialidad}"></p>
                                    </td>
                                    <td>
                                        <span th:text="${profesionalActivo.altaSistema ? 'Alta' : 'Baja'}"></span>
                                    </td>
                                    <td>
                                        <p class="text-muted mb-0" th:text="${profesionalActivo.telefono}"></p>
                                    </td>
                                    <td>
                                    <span class="badge bg-primary text-white m-4"
                                          th:if="${errorProfesionalesActivos != null}"
                                          th:text="${errorProfesionalesActivos.rol}"></span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="mt-2" th:if="${not #strings.isEmpty(error)}">
                                <p class="text-center"><span th:text="${error}"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Section Pacientes Activos-->
    <section class="pacientes container">
        <div class="row my-4">
            <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
                <div class="card">
                    <div class="card-header pb-0">
                        <div class="row">
                            <div class="col-lg-6 col-7">
                                <h6>Pacientes</h6>
                                <p class="text-sm mb-0">
                                    <i class="fa fa-check text-info" aria-hidden="true"></i>
                                    <span class="font-weight-bold ms-1">Pacientes de alta</span> este mes
                                </p>
                            </div>
                            <div class="col-lg-6 col-5 my-auto text-end">
                                <div class="dropdown float-lg-end pe-4">
                                    <a class="cursor-pointer" id="dropdownTable" data-bs-toggle="dropdown"
                                       aria-expanded="false">
                                        <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true"></i>
                                    </a>
                                    <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable">
                                        <li><a class="dropdown-item border-radius-md" href="javascript:;">Acciones</a>
                                        </li>
                                        <li><a class="dropdown-item border-radius-md" href="javascript:;">Pacientes</a>
                                        </li>
                                        <li><a class="dropdown-item border-radius-md"
                                               href="javascript:;">Profesionales</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body  p-3">
                        <div class="table-responsive">
                            <table class="table align-middle mb-0 bg-white">
                                <thead class="bg-light">
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Perfil
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sexo
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nº
                                        Afiliado
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Activo
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                        Teléfono
                                    </th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Tipo
                                        de
                                        Usuario
                                    </th>
                                </tr>
                                </thead>
                                <tbody th:each="pacienteActivo : ${pacientesActivos}">
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="profile-image">
                                                <img class="rounded-3" style="width: 50px;"
                                                     th:if="${pacienteActivo.imagen != null}"
                                                     th:src="@{/imagen/perfil/{id}(id=${pacienteActivo.id})}">
                                                <img class="rounded-3" style="width: 50px;"
                                                     th:unless="${pacienteActivo.imagen != null}"
                                                     th:src="@{/img/usuario.jpg}">
                                            </div>
                                            <div class="ms-3">
                                                <p class="fw-bold mb-1"
                                                   th:text="${pacienteActivo.nombre + ' ' + pacienteActivo.apellido}"></p>
                                                <p class="text-muted mb-0" th:text="${pacienteActivo.email}"></p>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <p class="fw-normal mb-1" th:text="${pacienteActivo.sexo}"></p>
                                    </td>
                                    <td>
                                        <p class="text-muted mb-0" th:text="${pacienteActivo.numeroObraSocial}"></p>
                                    </td>
                                    <td>
                                        <span th:text="${pacienteActivo.altaSistema ? 'Alta' : 'Baja'}"></span>
                                    </td>
                                    <td>
                                        <p class="text-muted mb-0" th:text="${pacienteActivo.telefono}"></p>
                                    </td>
                                    <td>
                                    <span class="badge bg-primary text-white m-4"
                                          th:text="${pacienteActivo.rol}"></span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="mt-2" th:if="${not #strings.isEmpty(errorPacientesActivos)}">
                                <p class="text-center"><span th:text="${errorPacientesActivos}"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Section User-->
    <section class="pacientes container">
        <div class="col-lg-12">
            <div class="card z-index-2">
                <div class="card-header pb-0">
                    <h6>Usuarios</h6>
                    <p class="text-sm">
                        <i class="fa fa-arrow-up text-success" aria-hidden="true"></i>
                        <span class="font-weight-bold">78% más</span> en 2023
                    </p>
                </div>
                <div class="card-body p-3">
                    <div class="chart">
                        <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Perfil
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Sexo
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Fecha
                                    de Nacimiento
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Estado
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Teléfono
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                    Tipo de
                                    Usuario
                                </th>
                            </tr>
                            </thead>
                            <tbody th:each="usuario : ${usuarios}">
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="profile-image">
                                            <img class="rounded-3" style="width: 50px;"
                                                 th:if="${usuario.imagen != null}"
                                                 th:src="@{/imagen/perfil/{id}(id=${usuario.id})}">
                                            <img class="rounded-3" style="width: 50px;"
                                                 th:unless="${usuario.imagen != null}" th:src="@{/img/usuario.jpg}">
                                        </div>
                                        <div class="ms-3">
                                            <p class="fw-bold mb-1"
                                               th:text="${usuario.nombre + ' ' + usuario.apellido}"></p>
                                            <p class="text-muted mb-0" th:text="${usuario.email}"></p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <p class="fw-normal mb-1" th:text="${usuario.sexo}"></p>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${usuario.fechaNacimiento}"></p>
                                </td>
                                <td>
                <span th:text="${usuario.altaSistema ? 'Alta' : 'Baja'}">
                </span>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${usuario.telefono}"></p>
                                </td>
                                <td>
                                    <span class="badge bg-primary text-white m-4" th:text="${usuario.rol}"></span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="mt-2" th:if="${not #strings.isEmpty(error)}">
                            <p class="text-center"><span th:text="${error}"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="container">
        <div id="tablaOpcion1" class="tabla-oculta">

            <table class="table table-striped table-bordered table-hover w-50 m-auto mt-5 text-center">
                <h2 class="text-center mt-5">Pacientes Acciones</h2>
                <thead>
                <tr>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5 "
                        scope="col">
                        ID
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        DNI
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Nombre
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Apellido
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Fecha de
                        Nacimiento
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Email
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">Sexo
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">Obra
                        Social
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Telefono
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">Tipo
                        de
                        Usuario
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">
                        Fecha de
                        alta
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">Foto
                        Perfil
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col">Alta
                        Sistema
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col"
                        sec:authorize="hasRole('ADMIN')">Cambiar Rol
                    </th>
                    <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                        scope="col"
                        colspan="2">Acciones
                    </th>
                </tr>
                </thead>
                <tbody th:each="paciente : ${pacientes}">
                <tr>
                    <th scope="row" th:text="${paciente.id}"></th>
                    <td th:text="${paciente.dni}"></td>
                    <td th:text="${paciente.nombre}"></td>
                    <td th:text="${paciente.apellido}"></td>
                    <td th:text="${paciente.fechaNacimiento}"></td>
                    <td th:text="${paciente.email}"></td>
                    <td th:text="${paciente.sexo}"></td>
                    <td th:text="${paciente.numeroObraSocial}"></td>
                    <td th:text="${paciente.telefono}"></td>
                    <td class="badge bg-primary text-white m-2" th:text="${paciente.rol}"></td>
                    <td th:text="${#temporals.format(paciente.fechaAlta, 'dd/MM/yyyy HH:mm:ss')}"></td>
                    <td>
                        <div class="profile-image">
                            <img class="rounded-3" style="width: 50px;"
                                 th:if="${paciente.imagen != null}"
                                 th:src="@{/imagen/perfil/{id}(id=${paciente.id})}">
                            <img class="rounded-3" style="width: 50px;"
                                 th:unless="${paciente.imagen != null}"
                                 th:src="@{/img/usuario.jpg}">
                        </div>
                    </td>
                    <td th:text="${paciente.altaSistema}"></td>
                    <td class="align-middle">
                        <form th:action="@{/admin/dashboard/cambiar-rol}" method="post"
                              class="form-inline-sm mt-3 d-flex justify-content-between">
                            <div class="input-group">
                                <label class="input-group-text sm" for="inputGroupSelect">Rol</label>
                                <select class="form-select-sm p-0" id="inputGroupSelect" name="rol">
                                    <option selected>Elige...</option>
                                    <option th:each="rol : ${roles}" th:value="${rol}"
                                            th:text="${rol}"></option>
                                </select>
                                <input type="hidden" name="id" th:value="${paciente.id}"/>
                            </div>
                            <button type="submit" class="btn btn-secondary btn-sm me-2"><i
                                    class="bi bi-person-rolodex"></i>
                                Guardar
                            </button>
                        </form>
                    </td>
                    <td>
                        <div class="container p-2">

                            <a th:if="${#authorization.expression('hasAnyRole(''ADMIN'')')}"
                               th:href="@{${'/'+#strings.toLowerCase(paciente.rol)+'/perfil/' + paciente.id}}"
                               method="GET">
                                <button type="submit" class="btn btn-warning btn-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                         fill="currentColor"
                                         class="bi bi-pencil-square mb-1" viewBox="0 0 16 16">
                                        <path
                                                d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                        <path fill-rule="evenodd"
                                              d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                    </svg>
                                    Modificar Usuario
                                </button>
                            </a>
                        </div>
                    </td>
                    <td>
                        <div class="container">
                            <a sec:authorize="hasRole('ADMIN')"
                               th:href="@{/admin/usuario/baja/_${paciente.id}_}">
                                <a th:if="${#authorization.expression('hasAnyRole(''ADMIN'')')}"
                                   th:href="@{${'/admin/'+'usuario'+'/baja/' + paciente.id}}" method="GET">
                                    <input type="hidden" th:value="${id}" name="id">
                                    <button type="button" class="btn btn-danger btn-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                             fill="currentColor"
                                             class="bi bi-pencil-square mb-1" viewBox="0 0 16 16">
                                            <path
                                                    d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                            <path fill-rule="evenodd"
                                                  d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                        </svg>
                                        Eliminar
                                    </button>
                                </a>
                            </a>
                        </div>
                    </td>
                </tbody>
            </table>
        </div>
    </div>


    <section class="container">
        <table class="table table-sm table-bordered w-75 m-auto mt-5 text-center">
            <h2 class="text-center mt-5">Profesional Acciones</h2>
            <thead>
            <tr>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">ID
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">DNI
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Nombre
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Apellido
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Fecha de nacimiento
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Email
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Sexo
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Matricula
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Especialidad
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Teléfono
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Tipo de Usuario
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Fecha de alta
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col">Foto Perfil
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col" sec:authorize="hasRole('ADMIN')">Alta Sistema
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col" sec:authorize="hasRole('ADMIN')">Cambiar Rol
                </th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-5"
                    scope="col" colspan="2">Acciones
                </th>
            </tr>
            </thead>
            <tbody th:each="profesional : ${profesionales}">
            <tr>
                <th scope="row" th:text="${profesional.id}"></th>
                <td th:text="${profesional.dni}"></td>
                <td th:text="${profesional.nombre}"></td>
                <td th:text="${profesional.apellido}"></td>
                <td th:text="${profesional.fechaNacimiento}"></td>
                <td th:text="${profesional.email}"></td>
                <td th:text="${profesional.sexo}"></td>
                <td th:text="${profesional.matricula}"></td>
                </td>
                <td th:text="${profesional.especialidad}"></td>
                </td>
                <td th:text="${profesional.telefono}"></td>
                <td class="badge bg-primary text-white m-2"
                    th:classappend="${profesional.rol eq 'admin'} ? 'bg-danger' : ''"
                    th:text="${profesional.rol}"></td>
                <td th:text="${#temporals.format(profesional.fechaAlta, 'dd/MM/yyyy HH:mm:ss')}"></td>
                <td>
                    <div class="profile-image">
                        <img class="rounded-3" style="width: 50px;"
                             th:if="${profesional.imagen != null}"
                             th:src="@{/imagen/perfil/{id}(id=${profesional.id})}">
                        <img class="profile-circle" style="width: 50px;"
                             th:unless="${profesional.imagen != null}"
                             th:src="@{/img/usuario.jpg}">
                    </div>
                </td>
                <td th:text="${profesional.altaSistema}"></td>
                <td>
                    <form th:action="@{/admin/dashboard/cambiar-rol}" method="post" class="form-inline-sm mt-3">
                        <div class="input-group">
                            <label class="input-group-text sm" for="inputGroupSelect1">Rol</label>
                            <select class="form-select-sm p-0" id="inputGroupSelect1" name="rol">
                                <option selected>Elige...</option>
                                <option th:each="rol : ${roles}" th:value="${rol}" th:text="${rol}"></option>
                            </select>
                            <input type="hidden" name="id" th:value="${profesional.id}"/>
                            <button type="submit" class=" btn btn-secondary btn-sm  me-2"><i
                                    class="bi bi-person-rolodex"></i> Guardar
                            </button>
                        </div>
                    </form>
                </td>
                <td>
                    <div class="container p-2">
                        <a th:if="${#authorization.expression('hasAnyRole(''ADMIN'')')}"
                           th:href="@{${'/'+#strings.toLowerCase(profesional.rol)+'/perfil/' + profesional.id}}"
                           method="GET">
                            <button type="submit" class="btn btn-warning btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                     class="bi bi-pencil-square mb-1" viewBox="0 0 16 16">
                                    <path
                                            d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                    <path fill-rule="evenodd"
                                          d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                </svg>
                                Modificar Usuario
                            </button>
                        </a>
                    </div>
                </td>
                <td>
                    <div class="container">
                        <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/usuario/baja/${profesional.id}}">
                            <a th:if="${#authorization.expression('hasAnyRole(''ADMIN'')')}"
                               th:href="@{${'/admin/'+'usuario'+'/baja/' + profesional.id}}" method="GET">
                                <input type="hidden" th:value="${id}" name="id">
                                <button type="button" class="btn btn-danger btn-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                         fill="currentColor"
                                         class="bi bi-pencil-square mb-1" viewBox="0 0 16 16">
                                        <path
                                                d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                        <path fill-rule="evenodd"
                                              d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                                    </svg>
                                    Eliminar
                                </button>
                            </a>
                        </a>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
        <div class="mt-2" th:if="${not #strings.isEmpty(errorProfesionalInactivo)}">
            <p class="text-center"><span th:text="${profesionalesErrors}"></span></p>
        </div>
    </section>


    <footer class="pie mt-5">
        <div class="links">
            <div class="seccion-nav">
                <p class="titulo-sec">Nosotros</p>
                <div>
                    <a href="https://github.com/nachxg/webAppServiciosSalud">Autoridades</a>
                    <a href="https://github.com/nachxg/webAppServiciosSalud">Preguntas frecuentes</a>
                    <a href="https://github.com/nachxg/webAppServiciosSalud">Términos y condiciones</a>
                </div>
            </div>
            <div class="seccion-nav">
                <p class="titulo-sec">Pacientes</p>
                <div>
                    <a href="/" onclick="cambiarCartel('pac')">Información</a>
                    <a href="/paciente/registrar">Registrarse</a>
                    <a href="/">Novedades</a>
                </div>
            </div>
            <div class="seccion-nav">
                <p class="titulo-sec">Profesionales</p>
                <div>
                    <a href="/" onclick="cambiarCartel('prof')">Información</a>
                    <a href="/profesional/especialidad">Especialidades</a>
                    <a href="/profesional/registrar">Trabaja con nosotros</a>
                </div>
            </div>
            <div class="seccion-nav">
                <p class="titulo-sec">Contacto</p>
                <div>
                    <a>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor"
                             class="bi bi-whatsapp" viewBox="0 0 16 16">
                            <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
                        </svg>
                        11-1234-5678</a>
                    <a>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor"
                             class="bi bi-envelope" viewBox="0 0 16 16">
                            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z"/>
                        </svg>
                        info@sanatoriovitalis.com</a>
                    <a>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor"
                             class="bi bi-instagram mb-1" viewBox="0 0 16 16">
                            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
                        </svg>
                        Sanatorio.Vitalis</a>
                </div>
            </div>
        </div>
        <div class="tyc">
            &copy; 2023 Sanatorio Vitalis. Todos los derechos reservados.
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script>
        function darDeAlta(id) {
            // Construct the URL with the provided ID
            var url = 'http://localhost:8080/admin/usuario/baja/' + id;

            // Redirect to the generated URL
            window.location.href = url;
        }



    </script>
