<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/css/inicio.css">
    <title>Inicio - Sanatorio Vitalis</title>
</head>
<body>
<nav class="">
    <a class="logo" href="/inicio">
        <img src="/img/logoColor.png" alt="" class="logo">
    </a>
    <div class="links-nav">
        <a id="link_prof" href="/profesional/especialidad" class="dropdown">Especialidades</a>
        <div id="desplegable" class="dropdown-content">
            <a th:if="${#authorization.expression('hasAnyRole(''PACIENTE'', ''PROFESIONAL'', ''ADMIN'')')}"
               th:href="@{${'/'+#strings.toLowerCase(session.usuariosession.rol)+'/perfil/'+ session.usuariosession.id }}">
                Editar Perfil </a>
            <a href="/logout">Cerrar sesión</a>
        </div>
        <div class="contenedor-perfil" id="contenedor-perfil">
            <div class="nombre-perfil">
                <i id="icono" class="fa-solid fa-angle-down"></i>
                <span th:text="${session.usuariosession.nombre} + ' ' + ${session.usuariosession.apellido}"></span>
            </div>
            <div id="profile-circle">
                <img class="profile-circle" th:if="${session.usuariosession.imagen != null}"
                     th:src="@{/imagen/perfil/{id}(id=${session.usuariosession.id})}">
                <img class="profile-circle" th:unless="${session.usuariosession.imagen != null}"
                     th:src="@{/img/usuario.jpg}">
            </div>
        </div>
    </div>
</nav>


<section class="pacientes container">
    <div class="row my-4">
        <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
            <div class="card">
                <div class="card-header pb-0">
                    <div class="row">
                        <div class="col-lg-6 col-7">
                            <h6>Profesionales</h6>
                            <p class="text-sm mb-0">
                                <i class="fa fa-check text-info" aria-hidden="true"></i>
                                <span class="font-weight-bold ms-1">Profesionales de alta</span> este mes
                            </p>
                        </div>
                        <div class="col-lg-6 col-5 my-auto text-end">
                            <div class="dropdown float-lg-end pe-4">
                                <a class="cursor-pointer" id="dropdownTable2" data-bs-toggle="dropdown"
                                   aria-expanded="false">
                                    <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true"></i>
                                </a>
                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable">
                                    <li><a class="dropdown-item border-radius-md" href="#">Acciones</a></li>
                                    <li><a class="dropdown-item border-radius-md" href="#">Pacientes</a></li>
                                    <li><a class="dropdown-item border-radius-md" href="#">Profesionales</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body p-3">
                    <div class="table-responsive">
                        <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Perfil
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sexo
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                    Matricula
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                    Especialidad
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Activo
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                    Teléfono
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Tipo de
                                    Usuario
                                </th>
                            </tr>
                            </thead>
                            <tbody th:each="profesionalActivo : ${profesionalesActivos}">
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="profile-image">
                                            <img class="rounded-3" style="width: 50px;"
                                                 th:src="@{/imagen/perfil/{id}(id=${profesionalActivo.id})}"
                                                 alt="Imagen de perfil">
                                        </div>
                                        <div class="ms-3">
                                            <p class="fw-bold mb-1"
                                               th:text="${profesionalActivo.nombre + ' ' + profesionalActivo.apellido}"></p>
                                            <p class="text-muted mb-0" th:text="${profesionalActivo.email}"></p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <p class="fw-normal mb-1" th:text="${profesionalActivo.sexo}"></p>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${profesionalActivo.matricula}"></p>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${profesionalActivo.especialidad}"></p>
                                </td>
                                <td>
                                    <span th:text="${profesionalActivo.altaSistema ? 'Alta' : 'Baja'}"></span>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${profesionalActivo.telefono}"></p>
                                </td>
                                <td>
                                    <span class="badge bg-primary text-white m-4"
                                          th:if="${errorProfesionalesActivos != null}"
                                          th:text="${errorProfesionalesActivos.rol}"></span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="mt-2" th:if="${not #strings.isEmpty(error)}">
                            <p class="text-center"><span th:text="${error}"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="pacientes container">
    <div class="row my-4">
        <div class="col-lg-12 col-md-6 mb-md-0 mb-4">
            <div class="card">
                <div class="card-header pb-0">
                    <div class="row">
                        <div class="col-lg-6 col-7">
                            <h6>Pacientes</h6>
                            <p class="text-sm mb-0">
                                <i class="fa fa-check text-info" aria-hidden="true"></i>
                                <span class="font-weight-bold ms-1">Pacientes de alta</span> este mes
                            </p>
                        </div>
                        <div class="col-lg-6 col-5 my-auto text-end">
                            <div class="dropdown float-lg-end pe-4">
                                <a class="cursor-pointer" id="dropdownTable" data-bs-toggle="dropdown"
                                   aria-expanded="false">
                                    <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true"></i>
                                </a>
                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5" aria-labelledby="dropdownTable">
                                    <li><a class="dropdown-item border-radius-md" href="javascript:;">Acciones</a>
                                    </li>
                                    <li><a class="dropdown-item border-radius-md" href="javascript:;">Pacientes</a></li>
                                    <li><a class="dropdown-item border-radius-md" href="javascript:;">Profesionales</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body  p-3">
                    <div class="table-responsive">
                        <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                            <tr>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Perfil
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Sexo
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nº
                                    Afiliado
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Activo
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                    Teléfono
                                </th>
                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Tipo de
                                    Usuario
                                </th>
                            </tr>
                            </thead>
                            <tbody th:each="pacienteActivo : ${pacientesActivos}">
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="profile-image">
                                            <img class="rounded-3" style="width: 50px;"
                                                 th:src="@{/imagen/perfil/{id}(id=${pacienteActivo.id})}"
                                                 alt="Imagen de perfil">
                                        </div>
                                        <div class="ms-3">
                                            <p class="fw-bold mb-1"
                                               th:text="${pacienteActivo.nombre + ' ' + pacienteActivo.apellido}"></p>
                                            <p class="text-muted mb-0" th:text="${pacienteActivo.email}"></p>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <p class="fw-normal mb-1" th:text="${pacienteActivo.sexo}"></p>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${pacienteActivo.numeroObraSocial}"></p>
                                </td>
                                <td>
                                    <span th:text="${pacienteActivo.altaSistema ? 'Alta' : 'Baja'}"></span>
                                </td>
                                <td>
                                    <p class="text-muted mb-0" th:text="${pacienteActivo.telefono}"></p>
                                </td>
                                <td>
                                    <span class="badge bg-primary text-white m-4"
                                          th:text="${pacienteActivo.rol}"></span>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="mt-2" th:if="${not #strings.isEmpty(errorPacientesActivos)}">
                            <p class="text-center"><span th:text="${errorPacientesActivos}"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="pacientes container">
    <div class="col-lg-12">
        <div class="card z-index-2">
            <div class="card-header pb-0">
                <h6>Usuarios</h6>
                <p class="text-sm">
                    <i class="fa fa-arrow-up text-success" aria-hidden="true"></i>
                    <span class="font-weight-bold">78% más</span> en 2023
                </p>
            </div>
            <div class="card-body p-3">
                <div class="chart">
                    <table class="table align-middle mb-0 bg-white">
                        <thead class="bg-light">
                        <tr>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                Perfil
                            </th>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Sexo
                            </th>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Fecha
                                de Nacimiento
                            </th>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                Estado
                            </th>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                Teléfono
                            </th>
                            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Tipo de
                                Usuario
                            </th>
                        </tr>
                        </thead>
                        <tbody th:each="usuario : ${usuarios}">
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class="profile-image">
                                        <img class="rounded-circle" style="width: 45px; height: 45px;"
                                             th:src="@{/imagen/perfil/{id}(id=${usuario.id})}"
                                             alt="Imagen de perfil">
                                    </div>
                                    <div class="ms-3">
                                        <p class="fw-bold mb-1"
                                           th:text="${usuario.nombre + ' ' + usuario.apellido}"></p>
                                        <p class="text-muted mb-0" th:text="${usuario.email}"></p>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="fw-normal mb-1" th:text="${usuario.sexo}"></p>
                            </td>
                            <td>
                                <p class="text-muted mb-0" th:text="${usuario.fechaNacimiento}"></p>
                            </td>
                            <td>
                <span th:text="${usuario.altaSistema ? 'Alta' : 'Baja'}">
                </span>
                            </td>
                            <td>
                                <p class="text-muted mb-0" th:text="${usuario.telefono}"></p>
                            </td>
                            <td>
                                <span class="badge bg-primary text-white m-4" th:text="${usuario.rol}"></span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="mt-2" th:if="${not #strings.isEmpty(error)}">
                        <p class="text-center"><span th:text="${error}"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<footer class="pie mt-5">
    <div class="links">
        <div class="seccion-nav">
            <p class="titulo-sec">Nosotros</p>
            <div>
                <a>Autoridades</a>
                <a>Preguntas frecuentes</a>
                <a>Términos y condiciones</a>
            </div>
        </div>
        <div class="seccion-nav">
            <p class="titulo-sec">Pacientes</p>
            <div>
                <a href="#seccion1" onclick="cambiarCartel('pac')">Información</a>
                <a>Lorem ipsum</a>
                <a>Lorem ipsum</a>
            </div>
        </div>
        <div class="seccion-nav">
            <p class="titulo-sec">Profesionales</p>
            <div>
                <a href="#seccion2" onclick="cambiarCartel('prof')">Información</a>
                <a>Lorem ipsum</a>
                <a>Lorem ipsum</a>
            </div>
        </div>
        <div class="seccion-nav">
            <p class="titulo-sec">Contacto</p>
            <div>
                <a>Lorem ipsum</a>
                <a>Lorem ipsum</a>
                <a>Lorem ipsum</a>
            </div>
        </div>
    </div>
    <div class="tyc">
        &copy; 2023 Sanatorio Vitalis. Todos los derechos reservados.
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<script src="/js/scriptInicio.js"></script>
<script>
    function darDeAlta(id) {
        var url = 'http://localhost:8080/admin/usuario/baja/' + id;
        window.location.href = url;
    }
</script>
</body>

</html>